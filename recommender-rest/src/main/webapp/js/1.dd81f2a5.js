(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"713b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",{attrs:{view:"hHh lpR lff"}},[s("q-header",{staticClass:"bg-primary text-white",attrs:{elevated:""}},[s("q-toolbar",[s("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"menu"},on:{click:function(e){t.leftDrawerOpen=!t.leftDrawerOpen}}}),s("q-toolbar-title",[s("q-avatar",[s("q-img",{attrs:{src:"/icons/favicon-32x32.png",srcset:"/icons/favicon-32x32.png 300w,\n                      /icons/favicon-96x96.png 3x,\n                      /icons/favicon-128x128.png 4x"}})],1),t._v("\n        Movie Recommender System\n      ")],1),s("q-btn",{staticClass:"q-mr-xs",attrs:{flat:"",round:"",dense:"",icon:"login"},on:{click:function(e){t.loginDialogVisible=!0}}}),s("q-btn",{attrs:{flat:"",round:"",dense:"",icon:t.dark_mode},on:{click:t.darkToggle}})],1)],1),s("LoginDialog",{ref:"loginDialog",model:{value:t.loginDialogVisible,callback:function(e){t.loginDialogVisible=e},expression:"loginDialogVisible"}}),s("q-drawer",{attrs:{side:"left",overlay:"",elevated:""},model:{value:t.leftDrawerOpen,callback:function(e){t.leftDrawerOpen=e},expression:"leftDrawerOpen"}},[s("q-list",[s("q-item-label",{staticClass:"text-grey-8",attrs:{header:""}},[t._v("\n        Essential Links\n      ")]),t._l(t.essentialLinks,(function(e){return s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.to,staticClass:"row",attrs:{to:e.to,clickable:"",exact:""}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:e.icon}})],1),s("q-item-section",[s("q-item-label",[t._v(" "+t._s(e.label)+" ")])],1)],1)}))],2)],1),s("q-page-container",{staticClass:"container-width "},[s("router-view")],1),s("q-footer",{staticClass:"bg-grey-8 text-white row ",attrs:{bordered:""}},[s("q-toolbar",[s("q-toolbar-title",{staticClass:"row justify-center items-center q-gutter-md"},[s("q-avatar",[s("q-img",{attrs:{src:"/icons/favicon-32x32.png",srcset:"/icons/favicon-32x32.png 300w,\n                      /icons/favicon-96x96.png 3x,\n                      /icons/favicon-128x128.png 4x"}})],1),s("div",[t._v("\n        Tyrkys Tiger Â© 2021\n        ")])],1)],1)],1)],1)},i=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-item",{attrs:{clickable:"",tag:"a",target:"_blank",href:t.link}},[t.icon?s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:t.icon}})],1):t._e(),s("q-item-section",[s("q-item-label",[t._v(t._s(t.title))]),s("q-item-label",{attrs:{caption:""}},[t._v("\n      "+t._s(t.caption)+"\n    ")])],1)],1)},o=[],r={name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""}}},l=r,c=s("2877"),u=s("66e5"),d=s("4074"),g=s("0016"),m=s("0170"),p=s("eebe"),h=s.n(p),f=Object(c["a"])(l,n,o,!1,null,null,null),b=f.exports;h()(f,"components",{QItem:u["a"],QItemSection:d["a"],QIcon:g["a"],QItemLabel:m["a"]});var q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{attrs:{value:t.value},on:{input:function(e){return t.$emit("input",e)}}},[s("q-card",{staticClass:"q-px-sm q-pb-md",staticStyle:{"max-width":"500px"}},[t.loggedIn?s("q-form",{staticClass:"q-gutter-md",on:{submit:t.handleLogout}},[s("q-card-section",[s("div",{staticClass:"text-h4"},[t._v("\n            User:\n          ")])]),s("q-card-section",{staticClass:"text-h4"},[t._v("\n          "+t._s(this.$store.getters["auth/user"].nickName)+"\n        ")]),s("q-card-section",[s("q-btn",{attrs:{label:"Log out",type:"submit",color:"secondary"}})],1)],1):s("q-form",{staticClass:"q-gutter-md",on:{submit:t.handleLogin,reset:t.loginReset}},[s("q-card-section",[s("div",{staticClass:"text-h3"},[t._v("\n            Log in:\n          ")])]),s("q-card-section",[s("q-input",{attrs:{filled:"",label:"Username","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}})],1),s("q-card-section",[s("q-input",{attrs:{label:"Password",filled:"",type:t.isPwd?"password":"text"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),s("q-card-section",[s("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary"}}),s("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Reset",type:"reset",color:"primary",flat:""}})],1)],1)],1)],1)},v=[];class w{constructor(t,e,s){this.username=t,this.email=e,this.password=s}}var y=s("1069"),k={props:["value"],data(){return{user:new w("",""),dialog:!0,loading:!1,message:"",isPwd:!0}},computed:{loggedIn(){return this.$store.getters["auth/loggedIn"]}},created(){console.log("logged in: ",this.$store.getters["auth/loggedIn"]),console.log("vue",JSON.stringify(this.$auth,null,1)),console.log("fun: ",JSON.stringify(this.$fun,null,1))},methods:{handleLogin(){this.loading=!0,this.user.username&&this.user.password&&(console.log("LOGIN: before dispatch "+JSON.stringify(this.user)),this.$store.dispatch("auth/login",this.user).then((()=>{y["a"].notifyPosit("Logged in succesfullly"),console.log("LOGIN: succes dispatch, before getting full "+JSON.stringify(this.user)),this.$axios.get("/users/nickname/"+this.user.username).then((t=>{console.log("LOGIN: succes dispatch,succes getting full "+JSON.stringify(this.user)),y["a"].notifyPosit("got resp.data: "+JSON.stringify(t.data));var e=t.data;e.password=this.user.password,this.$store.dispatch("auth/storeFullUser",e),this.$router.push("/recommended")})).catch((t=>{console.log("LOGIN: succes dispatch,not success getting full "+JSON.stringify(this.user)),y["a"].notifyNegat("Failed getting full user")}))}),(t=>{this.loading=!1,this.message=t.response&&t.response.data||t.message||t.toString(),y["a"].notifyNegat("Login unsuccesfull"),console.log("LOGIN: not succes dispatch "+message)})))},handleLogout(){this.$store.dispatch("auth/logout"),this.$router.push("/")},loginReset(){this.user=new w("","")}}},x=k,_=s("24e8"),Q=s("f09f"),L=s("0378"),$=s("a370"),S=s("9c40"),C=s("27f9"),I=Object(c["a"])(x,q,v,!1,null,null,null),O=I.exports;h()(I,"components",{QDialog:_["a"],QCard:Q["a"],QForm:L["a"],QCardSection:$["a"],QBtn:S["a"],QInput:C["a"],QIcon:g["a"]});const D=[{label:"Browse",icon:"search",to:"/"},{label:"Recommended",icon:"theaters",to:"/recommended"},{label:"My Account",icon:"account_circle",to:"/user"},{label:"Administrator",icon:"verified_user",to:"/admin"}];var N={name:"MainLayout",components:{EssentialLink:b,LoginDialog:O},data(){return{leftDrawerOpen:!1,essentialLinks:D,dark_mode:"dark_mode",loginDialogVisible:!1,slideVol:39,slideAlarm:56,slideVibration:63,nickname:"",password:"",isPwd:!0}},methods:{darkToggle(){this.$q.dark.set(!this.$q.dark.isActive),this.$q.dark.isActive?this.dark_mode="light_mode":this.dark_mode="dark_mode"},onSubmit(){this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Submitted"}),this.$store.dispatch("global/saveNickname",this.nickname),this.$store.dispatch("global/savePassword",this.password)}}},P=N,J=(s("a577"),s("4d5a")),R=s("e359"),T=s("65c6"),V=s("6ac5"),A=s("cb32"),E=s("068f"),F=s("9404"),G=s("1c1c"),j=s("09e3"),B=s("7ff0"),M=s("714f"),U=Object(c["a"])(P,a,i,!1,null,"0b3244e1",null);e["default"]=U.exports;h()(U,"components",{QLayout:J["a"],QHeader:R["a"],QToolbar:T["a"],QBtn:S["a"],QToolbarTitle:V["a"],QAvatar:A["a"],QImg:E["a"],QDialog:_["a"],QCard:Q["a"],QForm:L["a"],QCardSection:$["a"],QInput:C["a"],QIcon:g["a"],QDrawer:F["a"],QList:G["a"],QItemLabel:m["a"],QItem:u["a"],QItemSection:d["a"],QPageContainer:j["a"],QFooter:B["a"]}),h()(U,"directives",{Ripple:M["a"]})},a577:function(t,e,s){"use strict";s("bc71")},bc71:function(t,e,s){}}]);